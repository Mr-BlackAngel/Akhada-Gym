{% extends "member_layout.html" %}

{% block title %}My Profile - Member{% endblock %}

{% block member_content %}
<header class="mb-8">
    <h1 class="text-3xl font-bold text-neutral-900">My Profile</h1>
    <p class="text-neutral-600">View and manage your account information.</p>
</header>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

    <div class="lg:col-span-2">
        <form action="{{ url_for('member_profile') }}" method="POST" class="bg-white p-6 rounded-xl shadow-lg border border-neutral-200 space-y-6">
            
            <h2 class="text-xl font-semibold text-neutral-900">Personal Information</h2>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="p-4 rounded-md {{ 'bg-red-100 text-red-800' if category == 'error' else 'bg-primary-100 text-primary-800' }}" role="alert">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label for="name" class="block text-sm font-medium text-neutral-700">Full Name</label>
                    <input type="text" name="name" id="name" value="{{ member.name or '' }}" class="form-input w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500">
                </div>
                <div class="space-y-2">
                    <label for="email" class="block text-sm font-medium text-neutral-700">Email</label>
                    <input type="email" name="email" id="email" value="{{ member.email or '' }}" class="form-input w-full rounded-md border-neutral-300 shadow-sm bg-neutral-100 cursor-not-allowed" readonly disabled>
                    <p class="text-xs text-neutral-500">Email address cannot be changed.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-2">
                    <label for="phone" class="block text-sm font-medium text-neutral-700">Phone</label>
                    <input type="tel" name="phone" id="phone" value="{{ member.phone or '' }}" class="form-input w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500">
                </div>
                <div class="space-y-2">
                    <label for="age" class="block text-sm font-medium text-neutral-700">Age</label>
                    <input type="number" name="age" id="age" value="{{ member.age or '' }}" class="form-input w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500">
                </div>
                <div class="space-y-2">
                    <label for="gender" class="block text-sm font-medium text-neutral-700">Gender</label>
                    <select name="gender" id="gender" class="form-select w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500">
                        <option value="" {% if not member.gender %}selected{% endif %}>Select gender</option>
                        <option value="Male" {% if member.gender == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if member.gender == 'Female' %}selected{% endif %}>Female</option>
                        <option value="Other" {% if member.gender == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label for="address" class="block text-sm font-medium text-neutral-700">Address</label>
                <textarea name="address" id="address" rows="3" class="form-textarea w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500">{{ member.address or '' }}</textarea>
            </div>

            <div class="flex items-center justify-end gap-4 pt-6 border-t border-neutral-200">
                <button type="submit" class="bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-6 rounded-lg shadow-md transition-colors flex items-center gap-2">
                    Save Changes
                </button>
            </div>
        </form>
    </div>

    <div class="lg:col-span-1">
        <div class="bg-white p-6 rounded-xl shadow-lg border border-neutral-200 space-y-5">
            <h2 class="text-xl font-semibold text-neutral-900">Membership Details</h2>
            
            <div class="flex items-center gap-4">
                <span class="p-3 bg-primary-100 text-primary-600 rounded-lg">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 17 17 23 15.79 13.88"></polyline></svg>
                </span>
                <div>
                    <p class="text-sm text-neutral-500">Your Plan</p>
                    <p class="text-lg font-semibold text-neutral-900">{{ member.plan or 'N/A' }}</p>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <span class="p-3 bg-primary-100 text-primary-600 rounded-lg">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
                </span>
                <div>
                    <p class="text-sm text-neutral-500">Joined On</p>
                    <p class="text-lg font-semibold text-neutral-900">{{ member.joined_date or 'N/A' }}</p>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <span class="p-3 bg-primary-100 text-primary-600 rounded-lg">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"></path><path d="M22 12A10 10 0 1 1 12 2"></path><path d="M22 4h-4v4"></path><path d="m15.5 13.5-3 3-1.5-1.5"></path></svg>
                </span>
                <div>
                    <p class="text-sm text-neutral-500">Membership Expires</p>
                    <p class="text-lg font-semibold text-neutral-900">{{ member.expiry_date or 'N/A' }}</sppan>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}