{% extends "trainer_layout.html" %}

{% block title %}My Schedule - Trainer{% endblock %}

{% block trainer_content %}
<header class="mb-8">
    <h1 class="text-3xl font-bold text-neutral-900">My Upcoming Schedule</h1>
    <p class="text-neutral-600">Your upcoming personal sessions and group classes, sorted by date.</p>
</header>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="mb-6">
        {% for category, message in messages %}
            <div class="p-4 rounded-md {{ 'bg-red-100 text-red-800' if category == 'error' else 'bg-primary-100 text-primary-800' }}" role="alert">
                {{ message }}
            </div>
        {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<!-- 
  This is the main schedule list.
  We just loop through the 'events_list' from app.py.
-->
<div class="bg-white rounded-xl shadow-lg border border-neutral-200">
    <div class="space-y-0">
        
        {% if events_list %}
            {% for event in events_list %}
            <div class="flex items-start gap-4 p-5 border-b border-neutral-200 last:border-b-0">
                <!-- Icon based on event type -->
                <div class="p-3 bg-primary-100 text-primary-600 rounded-lg mt-1">
                    {% if event.type == 'Group Class' %}
                        <!-- Group Icon -->
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    {% else %}
                        <!-- Single User Icon -->
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    {% endif %}
                </div>
                
                <div class="flex-1">
                    <h3 class="text-lg font-semibold text-neutral-900">{{ event.title }}</h3>
                    <p class="text-sm text-neutral-600">
                        {{ event.date_time | format_isodate('%a, %b %d at %I:%M %p') }}
                    </p>
                </div>

                <!-- Tag -->
                <span class="px-3 py-1 rounded-full text-sm font-medium
                             {% if event.type == 'Group Class' %}
                                bg-purple-100 text-purple-800
                             {% else %}
                                bg-blue-100 text-blue-800
                             {% endif %}">
                    {{ event.type }}
                </span>
            </div>
            {% endfor %}
        {% else %}
            <!-- This shows if the events_list is empty -->
            <div class="text-center py-20 text-neutral-500">
                <svg class="w-16 h-16 mx-auto mb-4 text-neutral-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
                <h3 class="text-xl font-medium text-neutral-700">No Upcoming Events</h3>
                <p class="mt-2">Your schedule is clear. No upcoming sessions or classes found.</p>
            </div>
        {% endif %}

    </div>
</div>
{% endblock %}