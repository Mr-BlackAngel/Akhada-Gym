{% extends "admin_layout.html" %}

{% block title %}Member Check-ins - Admin{% endblock %}

{% block admin_content %}
<header class="mb-8">
    <div>
        <h1 class="text-3xl font-bold text-neutral-900">Member Check-ins</h1>
        <p class="text-neutral-600">A log of all member entries.</p>
    </div>
</header>

<div class="bg-white rounded-xl shadow-lg border border-neutral-200 overflow-hidden">
    <table class="min-w-full divide-y divide-neutral-200">
        <thead class="bg-neutral-50">
            <tr>
                <th scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Member
                    Name</th>
                <th scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Member ID
                </th>
                <th scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Date &
                    Time</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-neutral-200">

            {% for checkin in checkins_list %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm font-medium text-neutral-900">
                        <!-- We can access 'checkin.members.name' from our Python query -->
                        {{ checkin.members.name if checkin.members else 'N/A' }}
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-neutral-500">{{ checkin.member_id }}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-600">
                    <!-- 
                      *** THIS IS THE FIX ***
                      We are now using the new 'format_isodate' filter from app.py
                    -->
                    {{ checkin.timestamp | format_isodate }}
                </td>
            </tr>
            {% endfor %}

            {% if not checkins_list %}
            <tr>
                <td colspan="3" class="px-6 py-12 text-center text-neutral-500">
                    No check-ins found.
                </td>
            </tr>
            {% endif %}

        </tbody>
    </table>
</div>
{% endblock %}